use core::fmt;

use crate::{notimpl, utils::*};

// https://docs.oracle.com/javase/specs/jvms/se14/html/jvms-6.html
#[repr(u8)]
#[derive(Debug, Copy, Clone, PartialEq, Eq)]
#[allow(clippy::upper_case_acronyms)]
pub enum OpCode {
  NOP = 0,
  ACONSTNULL = 1,
  ICONSTM1 = 2,
  ICONST0 = 3,
  ICONST1 = 4,
  ICONST2 = 5,
  ICONST3 = 6,
  ICONST4 = 7,
  ICONST5 = 8,
  LCONST0 = 9,
  LCONST1 = 10,
  FCONST0 = 11,
  FCONST1 = 12,
  FCONST2 = 13,
  DCONST0 = 14,
  DCONST1 = 15,
  BIPUSH = 16,
  SIPUSH = 17,
  LDC = 18,
  LDCW = 19,
  LDC2W = 20,
  ILOAD = 21,
  LLOAD = 22,
  FLOAD = 23,
  DLOAD = 24,
  ALOAD = 25,
  ILOAD0 = 26,
  ILOAD1 = 27,
  ILOAD2 = 28,
  ILOAD3 = 29,
  LLOAD0 = 30,
  LLOAD1 = 31,
  LLOAD2 = 32,
  LLOAD3 = 33,
  FLOAD0 = 34,
  FLOAD1 = 35,
  FLOAD2 = 36,
  FLOAD3 = 37,
  DLOAD0 = 38,
  DLOAD1 = 39,
  DLOAD2 = 40,
  DLOAD3 = 41,
  ALOAD0 = 42,
  ALOAD1 = 43,
  ALOAD2 = 44,
  ALOAD3 = 45,
  IALOAD = 46,
  LALOAD = 47,
  AALOAD = 50,
  BALOAD = 51,
  CALOAD = 52,
  SALOAD = 53,
  ISTORE = 54,
  LSTORE = 55,
  FSTORE = 56,
  DSTORE = 57,
  ASTORE = 58,
  ISTORE0 = 59,
  ISTORE1 = 60,
  ISTORE2 = 61,
  ISTORE3 = 62,
  LSTORE0 = 63,
  LSTORE1 = 64,
  LSTORE2 = 65,
  LSTORE3 = 66,
  FSTORE0 = 67,
  FSTORE1 = 68,
  FSTORE2 = 69,
  FSTORE3 = 70,
  DSTORE0 = 71,
  DSTORE1 = 72,
  DSTORE2 = 73,
  DSTORE3 = 74,
  ASTORE0 = 75,
  ASTORE1 = 76,
  ASTORE2 = 77,
  ASTORE3 = 78,
  IASTORE = 79,
  LASTORE = 80,
  AASTORE = 83,
  BASTORE = 84,
  CASTORE = 85,
  SASTORE = 86,
  POP = 87,
  POP2 = 88,
  DUP = 89,
  DUPX1 = 90,
  DUPX2 = 91,
  DUP2 = 92,
  DUP2X1 = 93,
  DUP2X2 = 94,
  SWAP = 95,
  IADD = 96,
  LADD = 97,
  FADD = 98,
  DADD = 99,
  ISUB = 100,
  LSUB = 101,
  FSUB = 102,
  DSUB = 103,
  IMUL = 104,
  LMUL = 105,
  FMUL = 106,
  DMUL = 107,
  IDIV = 108,
  LDIV = 109,
  FDIV = 110,
  DDIV = 111,
  IREM = 112,
  LREM = 113,
  FREM = 114,
  DREM = 115,
  INEG = 116,
  LNEG = 117,
  FNEG = 118,
  DNEG = 119,
  ISHL = 120,
  LSHL = 121,
  ISHR = 122,
  LSHR = 123,
  IUSHR = 124,
  LUSHR = 125,
  IAND = 126,
  LAND = 127,
  IOR = 128,
  LOR = 129,
  IXOR = 130,
  LXOR = 131,
  IINC = 132,
  I2L = 133,
  I2F = 134,
  I2D = 135,
  L2I = 136,
  L2F = 137,
  L2D = 138,
  F2I = 139,
  F2L = 140,
  F2D = 141,
  D2I = 142,
  D2L = 143,
  D2F = 144,
  I2B = 145,
  I2C = 146,
  I2S = 147,
  LCMP = 148,
  FCMPL = 149,
  FCMPG = 150,
  DCMPL = 151,
  DCMPG = 152,
  IFEQ = 153,
  IFNE = 154,
  IFLT = 155,
  IFGE = 156,
  IFGT = 157,
  IFLE = 158,
  IFICMPEQ = 159,
  IFICMPNE = 160,
  IFICMPLT = 161,
  IFICMPGE = 162,
  IFICMPGT = 163,
  IFICMPLE = 164,
  IFACMPEQ = 165,
  IFACMPNE = 166,
  GOTO = 167,
  TABLESWITCH = 170,
  LOOKUPSWITCH = 171,
  IRETURN = 172,
  LRETURN = 173,
  FRETURN = 174,
  DRETURN = 175,
  ARETURN = 176,
  RETURN = 177,
  GETSTATIC = 178,
  PUTSTATIC = 179,
  GETFIELD = 180,
  PUTFIELD = 181,
  INVOKEVIRTUAL = 182,
  INVOKESPECIAL = 183,
  INVOKESTATIC = 184,
  INVOKEINTERFACE = 185,
  INVOKEDYNAMIC = 186,
  NEW = 187,
  NEWARRAY = 188,
  ANEWARRAY = 189,
  ARRAYLENGTH = 190,
  ATHROW = 191,
  CHECKCAST = 192,
  INSTANCEOF = 193,
  MONITORENTER = 194,
  MONITOREXIT = 195,
  MULTIANEWARRAY = 197,
  IFNULL = 198,
  IFNONNULL = 199,
}

impl fmt::Display for OpCode {
  fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
    write!(f, "{:?}", self)
  }
}

impl OpCode {
  pub fn from_byte(b: ju1) -> OpCode {
    match b {
      0 => OpCode::NOP,
      1 => OpCode::ACONSTNULL,
      2 => OpCode::ICONSTM1,
      3 => OpCode::ICONST0,
      4 => OpCode::ICONST1,
      5 => OpCode::ICONST2,
      6 => OpCode::ICONST3,
      7 => OpCode::ICONST4,
      8 => OpCode::ICONST5,
      9 => OpCode::LCONST0,
      10 => OpCode::LCONST1,
      11 => OpCode::FCONST0,
      12 => OpCode::FCONST1,
      13 => OpCode::FCONST2,
      14 => OpCode::DCONST0,
      15 => OpCode::DCONST1,
      16 => OpCode::BIPUSH,
      17 => OpCode::SIPUSH,
      18 => OpCode::LDC,
      19 => OpCode::LDCW,
      20 => OpCode::LDC2W,
      21 => OpCode::ILOAD,
      22 => OpCode::LLOAD,
      23 => OpCode::FLOAD,
      24 => OpCode::DLOAD,
      25 => OpCode::ALOAD,
      26 => OpCode::ILOAD0,
      27 => OpCode::ILOAD1,
      28 => OpCode::ILOAD2,
      29 => OpCode::ILOAD3,
      30 => OpCode::LLOAD0,
      31 => OpCode::LLOAD1,
      32 => OpCode::LLOAD2,
      33 => OpCode::LLOAD3,
      34 => OpCode::FLOAD0,
      35 => OpCode::FLOAD1,
      36 => OpCode::FLOAD2,
      37 => OpCode::FLOAD3,
      38 => OpCode::DLOAD0,
      39 => OpCode::DLOAD1,
      40 => OpCode::DLOAD2,
      41 => OpCode::DLOAD3,
      42 => OpCode::ALOAD0,
      43 => OpCode::ALOAD1,
      44 => OpCode::ALOAD2,
      45 => OpCode::ALOAD3,
      46 => OpCode::IALOAD,
      47 => OpCode::LALOAD,
      50 => OpCode::AALOAD,
      51 => OpCode::BALOAD,
      52 => OpCode::CALOAD,
      53 => OpCode::SALOAD,
      54 => OpCode::ISTORE,
      55 => OpCode::LSTORE,
      56 => OpCode::FSTORE,
      57 => OpCode::DSTORE,
      58 => OpCode::ASTORE,
      59 => OpCode::ISTORE0,
      60 => OpCode::ISTORE1,
      61 => OpCode::ISTORE2,
      62 => OpCode::ISTORE3,
      63 => OpCode::LSTORE0,
      64 => OpCode::LSTORE1,
      65 => OpCode::LSTORE2,
      66 => OpCode::LSTORE3,
      67 => OpCode::FSTORE0,
      68 => OpCode::FSTORE1,
      69 => OpCode::FSTORE2,
      70 => OpCode::FSTORE3,
      71 => OpCode::DSTORE0,
      72 => OpCode::DSTORE1,
      73 => OpCode::DSTORE2,
      74 => OpCode::DSTORE3,
      75 => OpCode::ASTORE0,
      76 => OpCode::ASTORE1,
      77 => OpCode::ASTORE2,
      78 => OpCode::ASTORE3,
      79 => OpCode::IASTORE,
      80 => OpCode::LASTORE,
      83 => OpCode::AASTORE,
      84 => OpCode::BASTORE,
      85 => OpCode::CASTORE,
      86 => OpCode::SASTORE,
      87 => OpCode::POP,
      88 => OpCode::POP2,
      89 => OpCode::DUP,
      90 => OpCode::DUPX1,
      91 => OpCode::DUPX2,
      92 => OpCode::DUP2,
      93 => OpCode::DUP2X1,
      94 => OpCode::DUP2X2,
      95 => OpCode::SWAP,
      96 => OpCode::IADD,
      97 => OpCode::LADD,
      98 => OpCode::FADD,
      99 => OpCode::DADD,
      100 => OpCode::ISUB,
      101 => OpCode::LSUB,
      102 => OpCode::FSUB,
      103 => OpCode::DSUB,
      104 => OpCode::IMUL,
      105 => OpCode::LMUL,
      106 => OpCode::FMUL,
      107 => OpCode::DMUL,
      108 => OpCode::IDIV,
      109 => OpCode::LDIV,
      110 => OpCode::FDIV,
      111 => OpCode::DDIV,
      112 => OpCode::IREM,
      113 => OpCode::LREM,
      114 => OpCode::FREM,
      115 => OpCode::DREM,
      116 => OpCode::INEG,
      117 => OpCode::LNEG,
      118 => OpCode::FNEG,
      119 => OpCode::DNEG,
      120 => OpCode::ISHL,
      121 => OpCode::LSHL,
      122 => OpCode::ISHR,
      123 => OpCode::LSHR,
      124 => OpCode::IUSHR,
      125 => OpCode::LUSHR,
      126 => OpCode::IAND,
      127 => OpCode::LAND,
      128 => OpCode::IOR,
      129 => OpCode::LOR,
      130 => OpCode::IXOR,
      131 => OpCode::LXOR,
      132 => OpCode::IINC,
      133 => OpCode::I2L,
      134 => OpCode::I2F,
      135 => OpCode::I2D,
      136 => OpCode::L2I,
      137 => OpCode::L2F,
      138 => OpCode::L2D,
      139 => OpCode::F2I,
      140 => OpCode::F2L,
      141 => OpCode::F2D,
      142 => OpCode::D2I,
      143 => OpCode::D2L,
      144 => OpCode::D2F,
      145 => OpCode::I2B,
      146 => OpCode::I2C,
      147 => OpCode::I2S,
      148 => OpCode::LCMP,
      149 => OpCode::FCMPL,
      150 => OpCode::FCMPG,
      151 => OpCode::DCMPL,
      152 => OpCode::DCMPG,
      153 => OpCode::IFEQ,
      154 => OpCode::IFNE,
      155 => OpCode::IFLT,
      156 => OpCode::IFGE,
      157 => OpCode::IFGT,
      158 => OpCode::IFLE,
      159 => OpCode::IFICMPEQ,
      160 => OpCode::IFICMPNE,
      161 => OpCode::IFICMPLT,
      162 => OpCode::IFICMPGE,
      163 => OpCode::IFICMPGT,
      164 => OpCode::IFICMPLE,
      165 => OpCode::IFACMPEQ,
      166 => OpCode::IFACMPNE,
      167 => OpCode::GOTO,
      170 => OpCode::TABLESWITCH,
      171 => OpCode::LOOKUPSWITCH,
      172 => OpCode::IRETURN,
      173 => OpCode::LRETURN,
      174 => OpCode::FRETURN,
      175 => OpCode::DRETURN,
      176 => OpCode::ARETURN,
      177 => OpCode::RETURN,
      178 => OpCode::GETSTATIC,
      179 => OpCode::PUTSTATIC,
      180 => OpCode::GETFIELD,
      181 => OpCode::PUTFIELD,
      182 => OpCode::INVOKEVIRTUAL,
      183 => OpCode::INVOKESPECIAL,
      184 => OpCode::INVOKESTATIC,
      185 => OpCode::INVOKEINTERFACE,
      186 => OpCode::INVOKEDYNAMIC,
      187 => OpCode::NEW,
      188 => OpCode::NEWARRAY,
      189 => OpCode::ANEWARRAY,
      190 => OpCode::ARRAYLENGTH,
      191 => OpCode::ATHROW,
      192 => OpCode::CHECKCAST,
      193 => OpCode::INSTANCEOF,
      194 => OpCode::MONITORENTER,
      195 => OpCode::MONITOREXIT,
      197 => OpCode::MULTIANEWARRAY,
      198 => OpCode::IFNULL,
      199 => OpCode::IFNONNULL,

      _ => notimpl!(b),
    }
  }
}
